--- arch/sparc/include/asm/bitops_64.h
+++ arch/sparc/include/asm/bitops_64.h
@@ -91,7 +124,10 @@
 
 #include <asm-generic/bitops/le.h>
 
-#include <asm-generic/bitops/ext2-atomic-setbit.h>
+#define ext2_set_bit_atomic(lock,nr,addr) \
+	test_and_set_bit((nr) ^ 0x38,(unsigned long *)(addr))
+#define ext2_clear_bit_atomic(lock,nr,addr) \
+	test_and_clear_bit((nr) ^ 0x38,(unsigned long *)(addr))
 
 #endif /* __KERNEL__ */
 
