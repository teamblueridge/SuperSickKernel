--- mm/oom_kill.c
+++ mm/oom_kill.c
@@ -339,7 +337,8 @@
 				 * then wait for it to finish before killing
 				 * some other task unnecessarily.
 				 */
-				if (!(p->group_leader->ptrace & PT_TRACE_EXIT))
+				if (!(task_ptrace(p->group_leader) &
+							PT_TRACE_EXIT))
 					return ERR_PTR(-1UL);
 			}
 		}
@@ -487,7 +486,7 @@
 
 	/*
 	 * If any of p's children has a different mm and is eligible for kill,
-	 * the one with the highest oom_badness() score is sacrificed for its
+	 * the one with the highest badness() score is sacrificed for its
 	 * parent.  This attempts to lose the minimal amount of work done while
 	 * still freeing memory.
 	 */
